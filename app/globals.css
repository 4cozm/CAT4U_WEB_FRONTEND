@tailwind base;
@tailwind components;
@tailwind utilities;

.text-base-color {
  color: var(--text);
}
.text-muted {
  color: var(--muted);
}

html,
body {
  /*사용자의 환경을 무조건 다크모드로 고정*/
  color-scheme: dark;
}

:root {
  /* 배경/유리 톤을 어두운 쪽으로 정리 */
  --bg: #0b101a;

  --glass: rgba(16, 20, 28, 0.55); /* 카드 */
  --glass-strong: rgba(16, 20, 28, 0.68); /* 헤더 등 강조 */
  --stroke: rgba(255, 255, 255, 0.1); /* 바깥 테두리 */
  --stroke-lite: rgba(255, 255, 255, 0.2); /* 하이라이트 */
  --shadow: 0 6px 20px rgba(0, 0, 0, 0.3);

  --text: #e6edf7; /* 본문 */
  --muted: #9aa7b6; /* 보조 텍스트 */
  --primary: #66b2ff; /* 링크/액션 */
  --secondary: #3ddc97;
  --accent: #ffb44d;
}

/* --- 공통 글래스 유틸 (헤더/카드에 공통으로 사용) --- */
.glass {
  background: var(--glass);
  border: 1px solid var(--stroke);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  box-shadow: var(--shadow);
}
.glass-strong {
  background: var(--glass-strong);
  border: 1px solid var(--stroke);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
}

/* backdrop-filter 미지원 브라우저(일부 모바일) 대비 */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
  .glass,
  .glass-strong {
    background: rgba(20, 24, 32, 0.85);
  }
}

/* 본문/배경은 기존 그대로 사용 */
body {
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Segoe UI", Roboto, Inter, system-ui,
    sans-serif;
  overflow-x: hidden;
}

/* 포커스 링은 살짝 더 선명하게 */
:focus-visible {
  outline: 2px solid color-mix(in oklab, var(--primary) 90%, transparent);
  outline-offset: 3px;
}

/* --- 버튼 톤을 다크 글래스에 맞춤 --- */
.btn-neu {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 14px;
  color: var(--text);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06), 0 6px 16px rgba(0, 0, 0, 0.35);
  transition: box-shadow 160ms ease, transform 120ms ease, background 160ms ease;
}
.btn-neu:hover {
  background: rgba(255, 255, 255, 0.12);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), 0 10px 24px rgba(0, 0, 0, 0.4);
}
.btn-neu:active {
  transform: translateY(1px);
  box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.25), 0 4px 14px rgba(0, 0, 0, 0.28);
}

/* --- 링크 언더라인은 색만 살짝 차분하게 --- */
.link-underline::after {
  background: linear-gradient(90deg, var(--primary), color-mix(in oklab, var(--primary) 60%, var(--secondary)));
  height: 2px;
}

/* 리스트 카드용 hover glow (다크 글래스 톤) */
.listcard-hover {
  transition: border-color 500ms ease-out, box-shadow 500ms ease-out;
}

.listcard-hover:hover {
  /* 테두리 색만 살짝 올리고, 보더-글로우를 얇게 */
  border-color: var(--primary);
  /* color-mix로 은은한 네온 느낌 */
  box-shadow: 0 0 12px color-mix(in oklab, var(--primary) 40%, transparent);
}

/* 내부 스크롤은 되지만 스크롤바는 보이지 않게 */
.scrollbar-none::-webkit-scrollbar {
  display: none;
}
.scrollbar-none {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
/* 바깥 레이아웃 밀림 방지 */
.scrollbar-none {
  scrollbar-gutter: stable both-edges;
}

/* 웹킷 기반 브라우저 (Chrome, Edge, Safari) */
::-webkit-scrollbar {
  width: 0px; /* 세로 스크롤바 폭 */
  height: 0px; /* 가로 스크롤바 높이 */
}

:root {
  --header-h: 88px; /* 실제 헤더 높이 */
}

body {
  padding-top: var(--header-h);
}

/*사용자 웹 테마와 별개로 BlockNote의 글쓰기 블럭이 무조건 투명하도록 고정*/
.ProseMirror.bn-editor {
  background-color: transparent !important;
}

/*읽기 모드 블럭 글씨가 무조건 흰색이 되도록 변경*/
.rounded-2xl.bg-white\/5.p-4 .bn-container {
  color: white !important;
}

/* BlockNote writing mode text color fix */
.bn-container,
.bn-editor,
.bn-editor * {
  color: rgb(248 250 252) !important; /* 거의 흰색 */
}

/* placeholder(“내용을 입력…” 같은 회색) */
.bn-editor [data-placeholder]::before {
  color: rgb(148 163 184) !important;
  opacity: 1 !important;
}

/* 링크는 구분되게 */
.bn-editor a {
  color: rgb(96 165 250) !important;
}

.splash-glass {
  background: radial-gradient(1200px 700px at 20% 20%, rgba(255, 255, 255, 0.06), transparent 60%),
    radial-gradient(900px 600px at 80% 30%, rgba(255, 255, 255, 0.04), transparent 55%),
    radial-gradient(900px 900px at 50% 90%, rgba(0, 0, 0, 0.25), transparent 60%), rgba(0, 0, 0, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(18px) saturate(120%);
  -webkit-backdrop-filter: blur(18px) saturate(120%);
}

@keyframes splashLift {
  0% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
  100% {
    transform: translate3d(0, -100%, 0);
    opacity: 1;
  }
}

.splash-leave {
  animation: splashLift 0.7s ease-in-out forwards;
}

.loading-letter {
  display: inline-block;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  padding: 0 !important;

  color: rgba(255, 255, 255, 0.95);
  font-size: 72px;
  font-weight: 700;
  line-height: 1;

  animation: loadingJump 0.9s ease-in-out infinite;
  will-change: transform, opacity;
}

@keyframes loadingJump {
  0%,
  100% {
    transform: translate3d(0, 0, 0);
    opacity: 0.75;
  }
  50% {
    transform: translate3d(0, -16px, 0);
    opacity: 1;
  }
}

/* 1) wrapper: 전체 톤 */
.bn-file-block-content-wrapper {
  color: var(--text);
}

/* 2) 실제 버튼 박스: 직접 덮기 */
.bn-file-block-content-wrapper .bn-add-file-button{
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  color: var(--text);
  border-radius: 12px;
}

/* hover에서 하얗게 돌아가는 걸 강제로 차단 */
.bn-file-block-content-wrapper .bn-add-file-button:hover{
  background: rgba(255,255,255,0.09) !important;
  border-color: rgba(255,255,255,0.18) !important;
  color: var(--text) !important;
}

/* 아이콘도 같이 밝게 튀면 이것도 */
.bn-file-block-content-wrapper .bn-add-file-button:hover .bn-add-file-button-icon{
  color: var(--muted) !important;
}